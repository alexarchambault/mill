package build.`multi-module`.webapp

import mill._
import mill.javalib._
import mill.javalib.publish._

object `package` extends RootModule with PublishModule with MavenModule {

  def javacOptions = super.javacOptions() ++
    Seq("-source", "1.6", "-target", "1.6")

  def depManagement = super.depManagement() ++ Seq(
    ivy"javax.servlet.jsp:jsp-api:2.2",
    ivy"javax.servlet:servlet-api:2.5",
    ivy"junit:junit-dep:4.10",
    ivy"org.hamcrest:hamcrest-core:1.2.1",
    ivy"org.hamcrest:hamcrest-library:1.2.1",
    ivy"org.mockito:mockito-core:1.8.5"
  )

  def bomModuleDeps = super.bomModuleDeps ++ Seq(build.`multi-module`)

  def moduleDeps = super.moduleDeps ++ Seq(build.`multi-module`.server)

  def compileIvyDeps = super.compileIvyDeps() ++
    Seq(ivy"javax.servlet.jsp:jsp-api:2.2", ivy"javax.servlet:servlet-api:2.5")

  def pomSettings = PomSettings(
    "Webapp.",
    "com.example.maven-samples",
    "http://www.example.com/webapp",
    Seq(),
    VersionControl(
      Some("http://github.com/gabrielf/maven-samples/webapp"),
      Some("scm:git:git@github.com:gabrielf/maven-samples.git/webapp"),
      Some("scm:git:git@github.com:gabrielf/maven-samples.git/webapp"),
      Some("HEAD")
    ),
    Seq()
  )

  def publishVersion = "1.0-SNAPSHOT"

  def pomPackagingType = "war"

}
